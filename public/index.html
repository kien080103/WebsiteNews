<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Blog News</title>
    <link rel="stylesheet" href="/style.css">
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />


</head>

<body>
    <!-- Header -->
    <header>
        <div class="logo"><a href="/" style="color:rgb(196, 72, 34);text-decoration:none;">üåê BlogNews</a></div>
        <div class="search-container my-6">
  <input id="search-input" type="text" placeholder="T√¨m ki·∫øm b√†i vi·∫øt..." style="height: 26px ; width: 840px; border-radius: 20px;" class="border p-2 rounded">
  <button id="search-button" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700" style="height: 30px ; width: 80px; border-radius: 20px;">T√¨m ki·∫øm</button>
</div>
        <div class="login-wrapper">
            <a href="facebook.com/kienvn2003" class="social-icon fb"><img src="image/facebook-icon.png"
                    alt="Facebook"></a>
            <a href="#" class="social-icon zalo"><img src="/image/zalo-icon.png" alt="Zalo"></a>
            <a href="#" class="social-icon cloud"><img src="/image/icould-icon.jpg" alt="Cloud"></a>
            <a href="/login.html" class="login-button">ƒêƒÉng nh·∫≠p</a>
        </div>

    </header>

    <header>
        <nav>
            <a href="#photo-section">Kh√°m ph√°</a>
            <a href="#top-stories">Tin t·ª©c</a>
            <a href="#latest-posts">Tin m·ªõi</a>
            <a href="#photo-section1">ƒê·ªùi s·ªëng</a>
            <a href="#footer">C√° nh√¢n h√≥a</a>
        </nav>
    </header>

    <!-- Th√™m b√¨a ·ªü ƒë√¢y -->
    <div class="hc_cover">
        <a href="/">
            <img src="/image/cover_full_hd.png" alt="Ch·ªß t·ªãch H·ªì Ch√≠ Minh - Nghƒ©a n∆∞·ªõc t√¨nh qu√™" class="img-fluid"
                width="100%">
        </a>
    </div>
    <!-- Main layout -->
    <main class="container">
        <!-- Sidebar tr√°i -->
        <aside class="sidebar-left">
            <h3>Chuy√™n m·ª•c</h3>
            <ul>
                <li><a href="#">Tin t·ª©c</a></li>
                <li><a href="#">Gi·∫£i tr√≠</a></li>
                <li><a href="#">ƒê·ªùi s·ªëng</a></li>
                <li><a href="#">Th·ªÉ thao</a></li>
                <li><a href="#">C√¥ng ngh·ªá</a></li>
            </ul>
        </aside>

        <!-- N·ªôi dung ch√≠nh -->
        <section class="main-content">
            </div>
            <div id="photo-section" class="swiper mySwiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide"><img src="/image/nghean4.jpg" alt="·∫¢nh 1" /></div>
                    <div class="swiper-slide"><img src="/image/nghean5.jpg" alt="·∫¢nh 2" /></div>
                    <div class="swiper-slide"><img src="/image/nghean6.jpg" alt="·∫¢nh 3" /></div>
                    <div class="swiper-slide"><img src="/image/l√†ng-kim-li√™n-2.jpg" alt="·∫¢nh 4" /></div>
                    <!-- Th√™m ·∫£nh kh√°c n·∫øu mu·ªën -->
                </div>

                <!-- N√∫t ƒëi·ªÅu h∆∞·ªõng -->
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>

                <!-- Ch·∫•m nh·ªè d∆∞·ªõi -->
                <div class="swiper-pagination"></div>
            </div>
            <h2>Top Stories</h2>
            <div id="top-stories" class="post-grid"></div>

            <h2>Tin m·ªõi</h2>
            <div id="latest-posts" class="post-list"></div>
            </div>
            <div id="photo-section1" class="swiper mySwiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide"><img src="/image/nghe-an-co-gi-banner.jpg" alt="·∫¢nh 1" /></div>
                    <div class="swiper-slide"><img src="/image/nghe-an-co-gi-6.jpg" alt="·∫¢nh 2" /></div>
                    <div class="swiper-slide"><img src="/image/nghe-an-co-gi-7.jpg" alt="·∫¢nh 3" /></div>
                    <div class="swiper-slide"><img src="/image/nghe-an-co-gi-20.jpg" alt="·∫¢nh 4" /></div>
                    <!-- Th√™m ·∫£nh kh√°c n·∫øu mu·ªën -->
                </div>

                <!-- N√∫t ƒëi·ªÅu h∆∞·ªõng -->
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>

                <!-- Ch·∫•m nh·ªè d∆∞·ªõi -->
                <div class="swiper-pagination"></div>
            </div>
        </section>



        <!-- Sidebar ph·∫£i -->
        <aside class="sidebar-right">
            <h3>C√¢u chuy·ªán n·ªïi b·∫≠t</h3>
            <ol id="top-list"></ol>
        </aside>
    </main>

    <!-- Script hi·ªÉn th·ªã b√†i vi·∫øt -->
    <script>
                fetch('/api/posts')
            .then(res => res.json())
            .then(posts => {
                const topContainer = document.getElementById('top-stories');
                const latestContainer = document.getElementById('latest-posts');
                const topList = document.getElementById('top-list');
        
                // X√≥a n·ªôi dung c≈©
                topContainer.innerHTML = '';
                latestContainer.innerHTML = '';
                topList.innerHTML = '';
        
                if (!Array.isArray(posts)) return;
        
                posts.slice(0, 4).forEach(post => {
                    topContainer.innerHTML += `
                        <a href="/post.html?id=${post._id}" class="post-card">
                          <img src="${post.featuredImage || 'https://via.placeholder.com/300'}">
                          <div class="post-info">
                            <h4>${post.title}</h4>
                            <p>${post.excerpt ? post.excerpt : (post.content ? post.content.slice(0, 60) : '')}...</p>
                          </div>
                        </a>`;
                });
        
                posts.slice(4, 10).forEach(post => {
                    latestContainer.innerHTML += `
                        <a href="/post.html?id=${post._id}" class="post-item">
                          <img src="${post.featuredImage || 'https://via.placeholder.com/100'}">
                          <div>
                            <h4>${post.title}</h4>
                            <p>${post.content ? post.content.slice(0, 80) : ''}...</p>
                          </div>
                        </a>`;
                });
        
                posts.slice(0, 3).forEach((post, i) => {
                    topList.innerHTML += `<li><a href="/post.html?id=${post._id}">${post.title}</a></li>`;
                });
            });


    </script>
    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        const swiper = new Swiper(".mySwiper", {
            loop: true,
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
            pagination: {
                el: ".swiper-pagination",
                clickable: true,
            },
        });

        // T√¨m ki·∫øm b√†i vi·∫øt
        document.getElementById('search-button').addEventListener('click', async () => {
  const query = document.getElementById('search-input').value.trim();

  if (!query) {
    alert('Vui l√≤ng nh·∫≠p t·ª´ kho√° ƒë·ªÉ t√¨m ki·∫øm.');
    return;
  }

  try {
    const response = await fetch(`/api/posts/search?q=${encodeURIComponent(query)}`);
    if (!response.ok) throw new Error('L·ªói khi t√¨m ki·∫øm.');

    const posts = await response.json();

    const postList = document.getElementById('post-list');
    postList.innerHTML = ''; // Xo√° k·∫øt qu·∫£ c≈©

    if (posts.length === 0) {
      postList.innerHTML = '<p>Kh√¥ng t√¨m th·∫•y b√†i vi·∫øt n√†o ph√π h·ª£p.</p>';
      return;
    }

    posts.forEach(post => {
      const postDiv = document.createElement('div');
      postDiv.className = 'bg-white p-4 rounded-lg shadow';

      postDiv.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-800 mb-2">${post.title}</h3>
        <p class="text-gray-600 text-sm mb-2">T√°c gi·∫£: ${post.authorId?.fullName || post.authorId?.username || '·∫®n danh'}</p>
        <p class="text-gray-700 line-clamp-3">${post.content?.slice(0, 150)}...</p>
        <a href="/post.html?id=${post._id}" class="text-green-600 hover:underline mt-2 inline-block">Xem chi ti·∫øt</a>
      `;
      postList.appendChild(postDiv);
    });

  } catch (err) {
    console.error(err);
    alert('ƒê√£ x·∫£y ra l·ªói khi t√¨m ki·∫øm b√†i vi·∫øt.');
  }
});

document.getElementById('search-input').addEventListener('keydown', e => {
  if (e.key === 'Enter') {
    document.getElementById('search-button').click();
  }
});

    </script>
    <footer id="footer" class="bg-gray-100 py-8 text-gray-600 text-sm">
        <div class="container mx-auto px-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <div>
                <h6 class="font-semibold text-gray-800 mb-3">Chuy√™n m·ª•c</h6>
                <ul class="list-none p-0">
                    <li class="mb-2"><a href="#" class="hover:text-indigo-600">ƒê·ªùi s·ªëng</a></li>
                    <li class="mb-2"><a href="#" class="hover:text-indigo-600">Du l·ªãch</a></li>
                    <li class="mb-2"><a href="#" class="hover:text-indigo-600">VƒÉn h√≥a</a></li>
                    <li class="mb-2"><a href="#" class="hover:text-indigo-600">·∫®m th·ª±c</a></li>
                    <li class="mb-2"><a href="#" class="hover:text-indigo-600">G√≥c nh√¨n</a></li>
                </ul>
            </div>
            <div>
                <h6 class="font-semibold text-gray-800 mb-3">Th√¥ng tin</h6>
                <ul class="list-none p-0">
                    <li class="mb-2"><a href="/about" class="hover:text-indigo-600">V·ªÅ ch√∫ng t√¥i</a></li>
                    <li class="mb-2"><a href="/contact" class="hover:text-indigo-600">Li√™n h·ªá</a></li>
                    <li class="mb-2"><a href="/privacy" class="hover:text-indigo-600">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
                    <li class="mb-2"><a href="/terms" class="hover:text-indigo-600">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a></li>
                    <li class="mb-2"><a href="/sitemap" class="hover:text-indigo-600">Sitemap</a></li>
                </ul>
            </div>
            <div>
                <h6 class="font-semibold text-gray-800 mb-3">M·∫°ng x√£ h·ªôi</h6>
                <ul class="list-none p-0">
                    <li class="mb-2"><a href="www.facebook.com/kienvn2003" class="hover:text-indigo-600">Facebook</a>
                    </li>
                    <li class="mb-2"><a href="#" class="hover:text-indigo-600">Twitter</a></li>
                    <li class="mb-2"><a href="#" class="hover:text-indigo-600">Instagram</a></li>
                    <li class="mb-2"><a href="#" class="hover:text-indigo-600">YouTube</a></li>
                    <li class="mb-2"><a href="#" class="hover:text-indigo-600">RSS</a></li>
                </ul>
            </div>
            <div>
                <h6 class="font-semibold text-gray-800 mb-3">Li√™n h·ªá</h6>
                <p class="mb-2">ƒê·ªãa ch·ªâ: 6 V√µ Th·ªã S√°u, Ph∆∞·ªùng B·∫øn Th·ªßy, Th√†nh Ph·ªë Vinh</p>
                <p class="mb-2">Email: kienvn2k3@gmail.com</p>
                <p class="mb-2">Hotline: 0327 062 858</p>
            </div>
        </div>
        <div class="container mx-auto px-4 mt-6 border-t border-gray-200 py-4 text-center text-gray-500 text-xs">
            &copy; 2025 BlogNews. All rights reserved.
        </div>
    </footer>

</body>

</html>